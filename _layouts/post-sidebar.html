---
layout: default
---

<!-- CSS Riêng cho Layout bài viết này -->
<style>
    /* Breadcrumb */
    .breadcrumb { font-size: 0.9rem; color: #666; margin-bottom: 10px; }
    .breadcrumb a { color: #666; }
    .breadcrumb a:hover { color: var(--accent-color); }
    
    /* Post Header Flexbox */
    .post-header-meta-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
        flex-wrap: wrap; /* Cho phép xuống dòng trên mobile */
        gap: 15px;
    }
    
    .meta-left { font-size: 0.9rem; color: #555; }
    .meta-left i, .meta-left strong { color: var(--primary-color); }
    
    .social-share a {
        display: inline-block;
        width: 30px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        background: #f4f4f4;
        border-radius: 50%;
        color: var(--primary-color);
        margin-left: 5px;
        font-size: 0.8rem;
    }
    .social-share a:hover { background: var(--accent-color); color: white; }

    /* Featured Image */
    .featured-image {
        width: 100%;
        height: auto;
        border-radius: 6px;
        margin-bottom: 30px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* Post Footer Section */
    .post-footer { margin-top: 50px; border-top: 1px solid #eee; padding-top: 30px; }
    
    .tag-cloud { margin-bottom: 30px; }
    .tag-cloud a {
        display: inline-block;
        background: #f1f1f1;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 0.85rem;
        color: #555;
        margin-right: 5px;
        margin-bottom: 5px;
    }
    .tag-cloud a:hover { background: var(--primary-color); color: white; }

    .author-box-footer {
        background: var(--bg-light);
        padding: 20px;
        border-radius: 6px;
        display: flex;
        gap: 20px;
        align-items: center;
        margin-bottom: 40px;
        border-left: 4px solid var(--accent-color);
    }

    /* Related Posts Grid */
    .related-posts-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* 2 cột */
        gap: 20px;
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
        .post-header-meta-row { flex-direction: column; align-items: flex-start; }
        .related-posts-grid { grid-template-columns: 1fr; } /* 1 cột trên mobile */
    }
</style>

<div class="container layout-grid layout-sidebar-right section">
    
    <!-- MAIN CONTENT -->
    <main id="main-content">
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
            <!-- A. HEADER BÀI VIẾT -->
            <header>
                <!-- 1. Breadcrumb -->
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <a href="{{ '/' | relative_url }}">Trang chủ</a> 
                    {% if page.categories %}
                        / <a href="{{ '/category/' | append: page.categories[0] | downcase | relative_url }}">{{ page.categories[0] | capitalize }}</a>
                    {% endif %}
                    / <span>{{ page.title | truncate: 50 }}</span>
                </nav>

                <!-- 2. Title -->
                <h1 class="post-title" itemprop="name headline" style="margin-bottom: 10px;">{{ page.title }}</h1>

                <!-- 3. Meta & Social (Flex Row) -->
                <div class="post-header-meta-row">
                    <!-- Trái: Author, Cat, Date -->
                    <div class="meta-left">
                        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
                            <strong>{{ page.author | default: site.author }}</strong>
                        </span>
                        <span> &bull; </span>
                        <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
                            {{ page.date | date: "%d/%m/%Y" }}
                        </time>
                        <span> &bull; </span>
                        <span style="color: var(--accent-color); font-weight: bold;">
                            {{ page.categories | first }}
                        </span>
                    </div>

                    <!-- Phải: Social Share (Dùng link chia sẻ nhanh) -->
                    <div class="social-share">
                        <span>Chia sẻ: </span>
                        <!-- Facebook -->
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ page.url | absolute_url }}" target="_blank" rel="noopener" aria-label="Share on Facebook">FB</a>
                        <!-- Twitter/X -->
                        <a href="https://twitter.com/intent/tweet?text={{ page.title }}&url={{ page.url | absolute_url }}" target="_blank" rel="noopener" aria-label="Share on Twitter">X</a>
                        <!-- Telegram -->
                        <a href="https://t.me/share/url?url={{ page.url | absolute_url }}&text={{ page.title }}" target="_blank" rel="noopener" aria-label="Share on Telegram">TG</a>
                    </div>
                </div>

                <!-- 4. Feature Image -->
                {% if page.image %}
                <figure>
                    <img src="{{ page.image | relative_url }}" alt="{{ page.title }}" class="featured-image" itemprop="image">
                </figure>
                {% endif %}
            </header>

            <!-- B. MAIN CONTENT -->
            <div class="post-content" itemprop="articleBody">
                {{ content }}
            </div>

            <!-- C. FOOTER BÀI VIẾT -->
            <footer class="post-footer">
                
                <!-- 1. Keywords (Tags) -->
                {% if page.tags.size > 0 %}
                <div class="tag-cloud">
                    <strong>Từ khóa: </strong>
                    {% for tag in page.tags %}
                    <a href="{{ '/tag/' | append: tag | relative_url }}" rel="tag">#{{ tag }}</a>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- 2. Author Box -->
                <div class="author-box-footer">
                    <img src="{{ site.author_avatar | relative_url }}" alt="{{ site.author }}" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover;">
                    <div>
                        <h4 style="margin-bottom: 5px;">{{ page.author | default: site.author }}</h4>
                        <p style="margin-bottom: 0; font-size: 0.9rem;">
                            Chuyên gia phân tích kỹ thuật và Sóng Elliott. Theo dõi tôi để cập nhật những xu hướng thị trường mới nhất.
                        </p>
                    </div>
                </div>

                <!-- 3. Related Posts (Bài viết liên quan cùng category) -->
                <div class="related-posts">
                    <h3 style="border-bottom: 2px solid var(--primary-color); display: inline-block; margin-bottom: 20px;">Bài viết liên quan</h3>
                    
                    <div class="related-posts-grid">
                        {% assign maxRelated = 6 %}
                        {% assign minCommonTags = 1 %}
                        {% assign maxRelatedCounter = 0 %}
                        
                        {% for post in site.posts %}
                            {% if post.url != page.url %}
                                {% if post.categories contains page.categories[0] %}
                                    <div class="post-card">
                                        <div class="post-card-body" style="padding: 15px;">
                                            <div class="post-meta">{{ post.date | date: "%d/%m/%Y" }}</div>
                                            <h4 style="font-size: 1.1rem; margin-bottom: 10px;">
                                                <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                                            </h4>
                                            <a href="{{ post.url | relative_url }}" style="font-size: 0.9rem; font-weight: bold;">Xem tiếp &rarr;</a>
                                        </div>
                                    </div>
                                    {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
                                    {% if maxRelatedCounter >= maxRelated %}
                                        {% break %}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>

            </footer>

        </article>
    </main>

    <!-- SIDEBAR -->
    {% include sidebar.html %}
</div>